let d={1:"Индивидуальное",2:"Эстафета",20:"Дети",66:"Online"};function p(i){if(typeof dataLayer>"u")return;let e=[];i.offers.forEach(r=>{var t;e.push({id:r.id,name:i.title,price:r.price.value,category:((t=i.type)==null?void 0:t.title)||"",variant:d[r.type]||""})}),dataLayer.push({ecommerce:{currencyCode:"RUB",detail:{products:e}}})}function o(i,e,r){var n;if(typeof dataLayer>"u")return;let t=[{id:e.id,name:i.title,price:e.price.value,category:((n=i.type)==null?void 0:n.title)||"",variant:d[e.type]||""}];e.services.forEach(c=>{let a=r.services.find(u=>u.id===c.id);!a||a.active===!1||t.push({id:c.id,name:c.title,price:c.price.value,category:"Сервисы"})}),dataLayer.push({ecommerce:{currencyCode:"RUB",add:{products:t}}})}function l(i,e){var c;if(typeof gtag>"u")return;const r=e.services.reduce((a,u)=>u.price.value*u.quantity+a,e.price.value*e.quantity);let t=[],n=0;t.push({index:n++,item_name:e.title,item_id:e.race?e.race.id:e.product,item_category:e.race?d[e.race.participation]||"":"Сервисы",price:e.price.value,quantity:e.quantity}),(c=e.services)==null||c.forEach(a=>{t.push({index:n++,item_name:a.name,item_id:a.product,item_category:"Сервисы",price:a.price.value,quantity:a.quantity})}),gtag("event","purchase",{transaction_id:i,affiliation:"IRONSTAR",value:r,currency:"RUB",items:t})}export{o as a,l as p,p as v};
