import{r as R,U as T,m as q,V as M,W as L,A as O,D as x,X as A,o as E,a as $,b as s,t as m,d as l,w as p,v as N,J as k,p as y,Y as U,F as I,e as z,f as B,n as C,T as P,Z as h,$ as G,L as Y,a0 as J,a1 as W,a2 as X,I as Z,a3 as j}from"./bIp8vrNC.js";var b={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"FormQuestionMutation"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"data"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"FormQuestionInput"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"result"},name:{kind:"Name",value:"FormQuestion"},arguments:[{kind:"Argument",name:{kind:"Name",value:"data"},value:{kind:"Variable",name:{kind:"Name",value:"data"}}}],directives:[]}]}}],loc:{start:0,end:100}};b.loc.source={body:"mutation FormQuestionMutation ($data: FormQuestionInput!) {\n    result: FormQuestion (data: $data)\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};function S(i,a){if(i.kind==="FragmentSpread")a.add(i.name.value);else if(i.kind==="VariableDefinition"){var e=i.type;e.kind==="NamedType"&&a.add(e.name.value)}i.selectionSet&&i.selectionSet.selections.forEach(function(n){S(n,a)}),i.variableDefinitions&&i.variableDefinitions.forEach(function(n){S(n,a)}),i.definitions&&i.definitions.forEach(function(n){S(n,a)})}var _={};(function(){b.definitions.forEach(function(a){if(a.name){var e=new Set;S(a,e),_[a.name.value]=e}})})();function F(i,a){for(var e=0;e<i.definitions.length;e++){var n=i.definitions[e];if(n.name&&n.name.value==a)return n}}function H(i,a){var e={kind:i.kind,definitions:[F(i,a)]};i.hasOwnProperty("loc")&&(e.loc=i.loc);var n=_[a]||new Set,f=new Set,o=new Set;for(n.forEach(function(t){o.add(t)});o.size>0;){var v=o;o=new Set,v.forEach(function(t){if(!f.has(t)){f.add(t);var u=_[t]||new Set;u.forEach(function(r){o.add(r)})}})}return f.forEach(function(t){var u=F(i,t);u&&e.definitions.push(u)}),e}H(b,"FormQuestionMutation");var g={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"EnumListQuery"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"type"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"items"},name:{kind:"Name",value:"Lists"},arguments:[{kind:"Argument",name:{kind:"Name",value:"type"},value:{kind:"Variable",name:{kind:"Name",value:"type"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:104}};g.loc.source={body:"query EnumListQuery ($type: String!) {\n    items: Lists (type: $type) {\n        id\n        title\n    }\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};function w(i,a){if(i.kind==="FragmentSpread")a.add(i.name.value);else if(i.kind==="VariableDefinition"){var e=i.type;e.kind==="NamedType"&&a.add(e.name.value)}i.selectionSet&&i.selectionSet.selections.forEach(function(n){w(n,a)}),i.variableDefinitions&&i.variableDefinitions.forEach(function(n){w(n,a)}),i.definitions&&i.definitions.forEach(function(n){w(n,a)})}var D={};(function(){g.definitions.forEach(function(a){if(a.name){var e=new Set;w(a,e),D[a.name.value]=e}})})();function Q(i,a){for(var e=0;e<i.definitions.length;e++){var n=i.definitions[e];if(n.name&&n.name.value==a)return n}}function K(i,a){var e={kind:i.kind,definitions:[Q(i,a)]};i.hasOwnProperty("loc")&&(e.loc=i.loc);var n=D[a]||new Set,f=new Set,o=new Set;for(n.forEach(function(t){o.add(t)});o.size>0;){var v=o;o=new Set,v.forEach(function(t){if(!f.has(t)){f.add(t);var u=D[t]||new Set;u.forEach(function(r){o.add(r)})}})}return f.forEach(function(t){var u=Q(i,t);u&&e.definitions.push(u)}),e}K(g,"EnumListQuery");const ee={class:"form-group"},ie={class:"form-group"},ae={class:"form-group"},ne={class:"select-wrap"},te=s("option",{value:""},"...",-1),se=["value"],oe=s("div",{class:"arrow-down"},[s("i",{class:"icon icon-arrow-down"})],-1),re={class:"form-group textarea-group"},le=s("div",{class:"form-divider"},null,-1),de={__name:"Question",setup(i){const a=R([]),e=T({name:"",email:"",type:"",message:"",captcha:""}),{user:n,isAuthorized:f}=q(M()),o=L();f.value&&(e.name=n.value.name+" "+n.value.last_name,e.email=n.value.email),O(async()=>{a.value=await x(g,{type:"QUESTION_TYPE"},"cache-first").then(({items:r})=>r)});const t=A({fields:{name:{required:h},email:{required:h,email:G},type:{required:h},message:{required:h}}},{fields:e},{$autoDirty:!0});async function u(){if(await t.value.$validate())try{e.captcha=await grecaptcha.execute(Y().public.recaptchaId,{action:"submit"}),await J(b,{data:e}),e.type=e.message="",t.value.$reset(),W("contact"),X(o.t("forms.success"),o.t("faq.form.success"))}catch(r){Z(r)}}return(r,d)=>{const V=j;return E(),$("form",{action:"",method:"post",onSubmit:d[4]||(d[4]=P(()=>{},["prevent"]))},[s("div",ee,[s("label",null,m(r.$t("faq.form.fields.name")),1),l(),p(s("input",{class:k({error:y(t).fields.name.$error}),type:"text",name:"name","onUpdate:modelValue":d[0]||(d[0]=c=>e.name=c)},null,2),[[N,e.name]])]),l(),s("div",ie,[s("label",null,m(r.$t("faq.form.fields.email")),1),l(),p(s("input",{class:k({error:y(t).fields.email.$error}),type:"email",name:"email","onUpdate:modelValue":d[1]||(d[1]=c=>e.email=c)},null,2),[[N,e.email]])]),l(),s("div",ae,[s("label",null,m(r.$t("faq.form.fields.type")),1),l(),s("div",ne,[p(s("select",{class:k([{error:y(t).fields.type.$error},"full-width"]),name:"type",tabindex:"1","onUpdate:modelValue":d[2]||(d[2]=c=>e.type=c)},[te,l(),(E(!0),$(I,null,z(a.value,c=>(E(),$("option",{value:c.id},m(c.title),9,se))),256))],2),[[U,e.type]]),l(),oe])]),l(),s("div",re,[s("label",null,m(r.$t("faq.form.fields.message")),1),l(),p(s("textarea",{class:k({error:y(t).fields.message.$error}),name:"message","onUpdate:modelValue":d[3]||(d[3]=c=>e.message=c)},null,2),[[N,e.message]])]),l(),le,l(),B(V,{callback:u,class:"btn-primary"},{default:C(()=>[l(m(r.$t("faq.form.submit")),1)]),_:1})],32)}}};export{de as _};
