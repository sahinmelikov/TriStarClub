import{_ as U}from"./CHXXxOy-.js";import{_ as B,S as Y,o,a as d,b as n,F as _,e as b,t as c,d as i,C as O,n as z,q as g,f as w,B as G,g as H,w as $,Y as V,z as J,c as K,i as W,l as X,U as Z,E as x,G as q,az as ee,D as E,I as C,p as R,k as te}from"./bIp8vrNC.js";import{u as ae}from"./B_dvM0pQ.js";import{u as ne}from"./CyCUcgYy.js";import{S as ie}from"./z1mF-5nA.js";const le={name:"searchItem",components:{StageItem:ie},props:{item:{type:Object}}},se=["data-content"],oe={class:"sportsman-name"},re=["data-content"],de=["data-content"],ce=["data-content"],me={key:2},ue=["data-content"],ve=["data-content","innerHTML"],fe=["data-content"],he={class:"header-socials"},ke=["href"],_e=["href"],ge=["href"];function ye(t,a,e,s,f,v){const l=Y("StageItem"),r=G,u=H;return o(),d("tr",null,[n("td",{"data-content":t.$t("searchteam.table.who")},[(o(!0),d(_,null,b(e.item.name,h=>(o(),d("div",oe,c(h),1))),256))],8,se),i(),n("td",{"data-content":t.$t("searchteam.table.whom")},[(o(!0),d(_,null,b(e.item.stages,(h,S)=>(o(),O(l,{stage:h,key:S,class:"sportsman-wanted"},null,8,["stage"]))),128))],8,re),i(),n("td",{"data-content":t.$t("searchteam.table.goal")},c(t.$t("searchteam.goals."+e.item.goal)),9,de),i(),n("td",{"data-content":t.$t("searchteam.table.event")},[e.item.event.url?(o(),O(r,{key:0,to:e.item.event.url,class:"event"},{default:z(()=>[i(c(e.item.event.name),1)]),_:1},8,["to"])):(o(),d(_,{key:1},[i(c(e.item.event.name),1)],64)),i(),e.item.event.date?(o(),d("div",me,c(t.$formatDate(e.item.event.date,"DD.MM.YYYY")),1)):g("",!0)],8,ce),i(),n("td",{"data-content":t.$t("searchteam.table.city")},c(e.item.event.city),9,ue),i(),n("td",{"data-content":t.$t("searchteam.table.comment"),innerHTML:e.item.text},null,8,ve),i(),n("td",{"data-content":t.$t("searchteam.table.contact")},[n("div",he,[e.item.contacts.email?(o(),d("a",{key:0,href:"mailto:"+e.item.contacts.email},[w(u,{name:"mail"})],8,ke)):g("",!0),i(),e.item.contacts.phone?(o(),d("a",{key:1,href:"tel:"+e.item.contacts.phone},[w(u,{name:"phone"})],8,_e)):g("",!0),i(),e.item.contacts.vk?(o(),d("a",{key:2,href:e.item.contacts.vk,target:"_blank"},[w(u,{name:"vkontakte"})],8,ge)):g("",!0)])],8,fe)])}const be=B(le,[["render",ye]]),pe={name:"filters",props:{filters:{type:Object},filtr:{type:Object}}},Se={class:"old_event-head old_event-head-results"},we={key:0,class:"select-wrap"},Ne={value:""},$e=["value"],Ve=n("div",{class:"arrow-down"},[n("i",{class:"icon icon-arrow-down"})],-1),De={key:1,class:"select-wrap large-select"},Te={value:"0"},Fe=["value"],Ee=n("div",{class:"arrow-down"},[n("i",{class:"icon icon-arrow-down"})],-1),Re={key:2,class:"select-wrap large-select"},Ie={value:"0"},Oe=["value"],Ae=n("div",{class:"arrow-down"},[n("i",{class:"icon icon-arrow-down"})],-1),Le={key:3,class:"select-wrap"},Qe={value:""},qe=["value"],Ce=n("div",{class:"arrow-down"},[n("i",{class:"icon icon-arrow-down"})],-1);function Me(t,a,e,s,f,v){return o(),d("div",Se,[n("div",null,[e.filters.stages&&e.filters.stages.length>1?(o(),d("div",we,[$(n("select",{"onUpdate:modelValue":a[0]||(a[0]=l=>e.filtr.stage=l)},[n("option",Ne,c(t.$t("searchteam.table.whom")),1),i(),(o(!0),d(_,null,b(e.filters.stages,l=>(o(),d("option",{value:l.id},c(l.title),9,$e))),256))],512),[[V,e.filtr.stage]]),i(),Ve])):g("",!0),i(),e.filters.goals&&e.filters.goals.length>1?(o(),d("div",De,[$(n("select",{"onUpdate:modelValue":a[1]||(a[1]=l=>e.filtr.goal=l)},[n("option",Te,c(t.$t("searchteam.table.goal")),1),i(),(o(!0),d(_,null,b(e.filters.goals,l=>(o(),d("option",{value:l.id},c(l.title),9,Fe))),256))],512),[[V,e.filtr.goal,void 0,{number:!0}]]),i(),Ee])):g("",!0),i(),e.filters.events&&e.filters.events.length>1?(o(),d("div",Re,[$(n("select",{"onUpdate:modelValue":a[2]||(a[2]=l=>e.filtr.event=l)},[n("option",Ie,c(t.$t("searchteam.table.event")),1),i(),(o(!0),d(_,null,b(e.filters.events,l=>(o(),d("option",{value:l.id},c(l.title),9,Oe))),256))],512),[[V,e.filtr.event,void 0,{number:!0}]]),i(),Ae])):g("",!0),i(),e.filters.city&&e.filters.city.length>1?(o(),d("div",Le,[$(n("select",{"onUpdate:modelValue":a[3]||(a[3]=l=>e.filtr.city=l)},[n("option",Qe,c(t.$t("searchteam.table.city")),1),i(),(o(!0),d(_,null,b(e.filters.city,l=>(o(),d("option",{value:l.id},c(l.title),9,qe))),256))],512),[[V,e.filtr.city]]),i(),Ce])):g("",!0)])])}const je=B(pe,[["render",Me]]);var F={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"SearchTeamListQuery"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"page"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"limit"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"type"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"filter"}},type:{kind:"NamedType",name:{kind:"Name",value:"Objects"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"search"},name:{kind:"Name",value:"SearchTeam"},arguments:[{kind:"Argument",name:{kind:"Name",value:"page"},value:{kind:"Variable",name:{kind:"Name",value:"page"}}},{kind:"Argument",name:{kind:"Name",value:"limit"},value:{kind:"Variable",name:{kind:"Name",value:"limit"}}},{kind:"Argument",name:{kind:"Name",value:"type"},value:{kind:"Variable",name:{kind:"Name",value:"type"}}},{kind:"Argument",name:{kind:"Name",value:"filter"},value:{kind:"Variable",name:{kind:"Name",value:"filter"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"pagination"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"total"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"limit"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"page"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:277}};F.loc.source={body:"query SearchTeamListQuery ($page: Int, $limit: Int, $type: String!, $filter: Objects) {\n    search: SearchTeam (page: $page, limit: $limit, type: $type, filter: $filter) {\n        items\n        pagination {\n            total\n            limit\n            page\n        }\n    }\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};function D(t,a){if(t.kind==="FragmentSpread")a.add(t.name.value);else if(t.kind==="VariableDefinition"){var e=t.type;e.kind==="NamedType"&&a.add(e.name.value)}t.selectionSet&&t.selectionSet.selections.forEach(function(s){D(s,a)}),t.variableDefinitions&&t.variableDefinitions.forEach(function(s){D(s,a)}),t.definitions&&t.definitions.forEach(function(s){D(s,a)})}var A={};(function(){F.definitions.forEach(function(a){if(a.name){var e=new Set;D(a,e),A[a.name.value]=e}})})();function M(t,a){for(var e=0;e<t.definitions.length;e++){var s=t.definitions[e];if(s.name&&s.name.value==a)return s}}function Be(t,a){var e={kind:t.kind,definitions:[M(t,a)]};t.hasOwnProperty("loc")&&(e.loc=t.loc);var s=A[a]||new Set,f=new Set,v=new Set;for(s.forEach(function(r){v.add(r)});v.size>0;){var l=v;v=new Set,l.forEach(function(r){if(!f.has(r)){f.add(r);var u=A[r]||new Set;u.forEach(function(h){v.add(h)})}})}return f.forEach(function(r){var u=M(t,r);u&&e.definitions.push(u)}),e}Be(F,"SearchTeamListQuery");var N={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"SearchTeamListFilterQuery"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"page"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"limit"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"type"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"search"},name:{kind:"Name",value:"SearchTeam"},arguments:[{kind:"Argument",name:{kind:"Name",value:"page"},value:{kind:"Variable",name:{kind:"Name",value:"page"}}},{kind:"Argument",name:{kind:"Name",value:"limit"},value:{kind:"Variable",name:{kind:"Name",value:"limit"}}},{kind:"Argument",name:{kind:"Name",value:"type"},value:{kind:"Variable",name:{kind:"Name",value:"type"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"filter"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"items"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"pagination"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"total"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"limit"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"page"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:263}};N.loc.source={body:"query SearchTeamListFilterQuery ($page: Int, $limit: Int, $type: String!) {\n    search: SearchTeam (page: $page, limit: $limit, type: $type) {\n        filter\n        items\n        pagination {\n            total\n            limit\n            page\n        }\n    }\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};function T(t,a){if(t.kind==="FragmentSpread")a.add(t.name.value);else if(t.kind==="VariableDefinition"){var e=t.type;e.kind==="NamedType"&&a.add(e.name.value)}t.selectionSet&&t.selectionSet.selections.forEach(function(s){T(s,a)}),t.variableDefinitions&&t.variableDefinitions.forEach(function(s){T(s,a)}),t.definitions&&t.definitions.forEach(function(s){T(s,a)})}var L={};(function(){N.definitions.forEach(function(a){if(a.name){var e=new Set;T(a,e),L[a.name.value]=e}})})();function j(t,a){for(var e=0;e<t.definitions.length;e++){var s=t.definitions[e];if(s.name&&s.name.value==a)return s}}function Pe(t,a){var e={kind:t.kind,definitions:[j(t,a)]};t.hasOwnProperty("loc")&&(e.loc=t.loc);var s=L[a]||new Set,f=new Set,v=new Set;for(s.forEach(function(r){v.add(r)});v.size>0;){var l=v;v=new Set,l.forEach(function(r){if(!f.has(r)){f.add(r);var u=L[r]||new Set;u.forEach(function(h){v.add(h)})}})}return f.forEach(function(r){var u=j(t,r);u&&e.definitions.push(u)}),e}Pe(N,"SearchTeamListFilterQuery");const Ue={class:"table-default table-find-command table-one-line"},Ye={class:"table-head-default"},ze={class:"table-head-default"},Ge={class:"table-head-default"},He={class:"table-head-default"},Je={class:"table-head-default"},Ke={class:"table-head-default table-head-default"},We={class:"table-head-default table-head-default"},I=10,at={__name:"index",async setup(t){let a,e;const s=J(),f=K(()=>s.params.type||"user"),{data:v,error:l}=([a,e]=W(async()=>ne(async()=>{let m=E(N,{type:f.value,page:1,limit:I});return{...await Promise.all([m,te().getPageInfo()]).then(([{search:k}])=>k)}},"$dG0aERwD4N")),a=await a,e(),a);if(l.value)throw X(l.value);const r=Z({stage:"",goal:0,event:0,city:""}),{filter:u,items:h,pagination:S}=x(v.value);q(r,()=>{Q()}),q(f,()=>{r.stage="",r.city="",r.goal=0,r.event=0,ee(()=>{P()})});async function P(){try{const m=await E(N,{type:f.value,page:1,limit:I,filter:r}).then(({search:y})=>y);u.value=m.filter,h.value=m.items,S.value=m.pagination}catch(m){C(m)}}async function Q(m=1,y=!1){m<1&&(m=1);try{const k=await E(F,{type:f.value,page:m,limit:I,filter:r}).then(({search:p})=>p);h.value=k.items,S.value=k.pagination,y&&ae(".table-find-command")}catch(k){C(k)}}return(m,y)=>{const k=U;return o(),d("div",null,[w(je,{filters:R(u),filtr:r},null,8,["filters","filtr"]),i(),n("div",Ue,[n("table",null,[n("thead",null,[n("tr",null,[n("th",null,[n("div",Ye,c(m.$t("searchteam.table.who")),1)]),i(),n("th",null,[n("div",ze,c(m.$t("searchteam.table.whom")),1)]),i(),n("th",null,[n("div",Ge,c(m.$t("searchteam.table.goal")),1)]),i(),n("th",null,[n("div",He,c(m.$t("searchteam.table.event")),1)]),i(),n("th",null,[n("div",Je,c(m.$t("searchteam.table.city")),1)]),i(),n("th",null,[n("div",Ke,c(m.$t("searchteam.table.comment")),1)]),i(),n("th",null,[n("div",We,c(m.$t("searchteam.table.contact")),1)])])]),i(),n("tbody",null,[(o(!0),d(_,null,b(R(h),p=>(o(),O(be,{key:p.id,item:p},null,8,["item"]))),128))])])]),i(),w(k,{data:R(S),onChange:y[0]||(y[0]=p=>Q(p,!0))},null,8,["data"])])}}};export{at as default};
