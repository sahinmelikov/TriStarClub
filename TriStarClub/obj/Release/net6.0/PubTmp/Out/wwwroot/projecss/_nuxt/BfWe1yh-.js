import{_ as I,ao as A,S as C,o as s,a as l,F as m,e as $,d as n,C as B,J as F,K as x,b as u,p as L,f as N,n as O,t as d,q as f,B as V}from"./bIp8vrNC.js";import{d as q}from"./BvQgWdB0.js";import{S as z}from"./z1mF-5nA.js";let D,c=1,k,y,p,g,h,_;function T(e){p=0,y=0,k=[],h=[".6s"],g=[],e.querySelectorAll(".part").forEach(t=>{_=t.getAttribute("data-distance"),k.push(_),D=_+"%",g.push(c*_/30+"s"),p=30*c;for(let r=0;r<k.length;r++)p=p+parseFloat(k[r]);h.push(c*p/30+"s"),t.style.animationDelay=h[y+1],t.style.transitionDelay=h[y],t.style.transitionDuration=g[y],t.style.width=D,y++}),e.querySelectorAll(".point.point-end").forEach(t=>{t.style.animationDelay=parseFloat(g[g.length-1])+parseFloat(h[h.length-2])+"s"}),c>.1?c=c*.95:c=.1}const j={name:"typeBarParts",components:{StageItem:z},props:{length:{type:Array,default:()=>[]},animated:{type:Boolean,default:!1},grouped:{type:Boolean,default:!0}},computed:{groups(){if(!this.length||this.length[0].length<=0)return[];let e=[];return this.length.length<=3||this.grouped===!1?e=[A(this.length)]:this.length.forEach((t,r)=>{let a=Math.floor(r/3);typeof e[a]>"u"&&(e[a]=[]),e[a].push(t)}),e.forEach((t,r)=>{let a={swim:30,bike:1,run:3},v=t.reduce((o,i)=>o+i.length,0);t[0].length/v>.15&&(a.swim=4,a.bike=2),v=t.reduce((o,i)=>o+i.length*a[i.type],0),t.forEach((o,i)=>{e[r][i].percent=Math.floor(o.length*a[o.type]/v*1e4)/100})}),e}},mounted(){this.$refs.items&&this.$refs.items.forEach(e=>{T(e)})}},M=u("div",{class:"line"},null,-1),P=u("div",{class:"point"},null,-1),J=u("div",{class:"point point-end"},null,-1);function K(e,t,r,a,v,o){const i=C("StageItem");return s(),l("div",null,[(s(!0),l(m,null,$(o.groups,w=>(s(),l("div",{class:"obstacle-bar-parts",ref_for:!0,ref:"items"},[M,n(),P,n(),(s(!0),l(m,null,$(w,(b,E)=>(s(),B(i,{stage:b,key:E,class:F(["part",b.type]),style:x({width:r.animated?null:b.percent+"%"}),"data-distance":b.percent},null,8,["stage","class","style","data-distance"]))),128)),n(),J],512))),256))])}const S=I(j,[["render",K]]),U={class:"competition-type"},G=["src","alt"],H={class:"obstacle-bar"},Q={class:"title"},R={key:0,class:"distance-summ"},W={name:"type",components:{BarParts:S},props:{type:{type:Object}},data(){return{observer:null}},mounted(){!this.$el||typeof window.IntersectionObserver>"u"||(this.observer=new IntersectionObserver(e=>{e.forEach(t=>{t.isIntersecting&&(t.target.classList.add("scrolled"),this.observer=this.observer.disconnect())})},{}),this.observer.observe(this.$el))},beforeUnmount(){this.observer&&(this.observer=this.observer.disconnect())}},ee=Object.assign(W,{setup(e){return(t,r)=>{const a=V;return s(),l("div",U,[u("img",{src:e.type.image||L(q),alt:e.type.title,loading:"lazy"},null,8,G),n(),u("div",H,[u("div",Q,[N(a,{to:e.type.url},{default:O(()=>[n(d(e.type.title),1)]),_:1},8,["to"])]),n(),e.type.length.length?(s(),B(S,{key:0,length:e.type.length,animated:!0,grouped:!1},null,8,["length"])):f("",!0)]),n(),e.type.total?(s(),l("div",R,[e.type.total.modifer==="to"&&!e.type.total.modifer_val?(s(),l(m,{key:0},[n(d(t.$t("metric.to")),1)],64)):f("",!0),n(),u("span",null,[n(d(t.$formatLength(e.type.total.length)),1),e.type.total.modifer_val?(s(),l(m,{key:0},[n("-"+d(t.$formatLength(e.type.total.modifer_val)),1)],64)):f("",!0)]),n(),e.type.total.measure==="km"?(s(),l(m,{key:1},[n(d(t.$t("metric.km")),1)],64)):e.type.total.measure==="m"?(s(),l(m,{key:2},[n(d(t.$t("metric.min")),1)],64)):f("",!0)])):f("",!0)])}}});export{ee as _};
