import{_ as j}from"./Ctq6v3cF.js";import{_ as G}from"./vTIBdjwe.js";import{z as U,c as H,r as J,i as M,l as W,E as K,G as X,D as O,H as Y,I as Z,o as c,a as N,b,f as g,d as m,p as u,n as x,t as Q,J as F,F as A,e as P,q as T,C as $,P as ee,y as ie,k as ne}from"./bIp8vrNC.js";import{_ as ae}from"./CHXXxOy-.js";import{u as te}from"./CyCUcgYy.js";import{u as le}from"./B_dvM0pQ.js";import{_ as se}from"./c-ZnYkb2.js";import{_ as re,U as de}from"./CtpbzS-f.js";import"./BvQgWdB0.js";var _={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"NewsListQuery"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"page"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"limit"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"filter"}},type:{kind:"NamedType",name:{kind:"Name",value:"Objects"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"news"},name:{kind:"Name",value:"News"},arguments:[{kind:"Argument",name:{kind:"Name",value:"page"},value:{kind:"Variable",name:{kind:"Name",value:"page"}}},{kind:"Argument",name:{kind:"Name",value:"limit"},value:{kind:"Variable",name:{kind:"Name",value:"limit"}}},{kind:"Argument",name:{kind:"Name",value:"filter"},value:{kind:"Variable",name:{kind:"Name",value:"filter"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"date"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"image"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"description"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"pagination"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"total"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"limit"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"page"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:354}};_.loc.source={body:"query NewsListQuery ($page: Int, $limit: Int, $filter: Objects) {\n    news: News (page: $page, limit: $limit, filter: $filter) {\n        items {\n            id\n            url\n            title\n            date\n            image\n            description\n        }\n        pagination {\n            total\n            limit\n            page\n        }\n    }\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};function y(e,i){if(e.kind==="FragmentSpread")i.add(e.name.value);else if(e.kind==="VariableDefinition"){var n=e.type;n.kind==="NamedType"&&i.add(n.name.value)}e.selectionSet&&e.selectionSet.selections.forEach(function(a){y(a,i)}),e.variableDefinitions&&e.variableDefinitions.forEach(function(a){y(a,i)}),e.definitions&&e.definitions.forEach(function(a){y(a,i)})}var V={};(function(){_.definitions.forEach(function(i){if(i.name){var n=new Set;y(i,n),V[i.name.value]=n}})})();function q(e,i){for(var n=0;n<e.definitions.length;n++){var a=e.definitions[n];if(a.name&&a.name.value==i)return a}}function oe(e,i){var n={kind:e.kind,definitions:[q(e,i)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var a=V[i]||new Set,s=new Set,r=new Set;for(a.forEach(function(t){r.add(t)});r.size>0;){var p=r;r=new Set,p.forEach(function(t){if(!s.has(t)){s.add(t);var l=V[t]||new Set;l.forEach(function(v){r.add(v)})}})}return s.forEach(function(t){var l=q(e,t);l&&n.definitions.push(l)}),n}oe(_,"NewsListQuery");var w={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"NewsListFilterQuery"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"page"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"limit"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"filter"}},type:{kind:"NamedType",name:{kind:"Name",value:"Objects"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"news"},name:{kind:"Name",value:"News"},arguments:[{kind:"Argument",name:{kind:"Name",value:"page"},value:{kind:"Variable",name:{kind:"Name",value:"page"}}},{kind:"Argument",name:{kind:"Name",value:"limit"},value:{kind:"Variable",name:{kind:"Name",value:"limit"}}},{kind:"Argument",name:{kind:"Name",value:"filter"},value:{kind:"Variable",name:{kind:"Name",value:"filter"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"filter"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"items"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"date"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"image"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"description"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"pagination"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"total"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"limit"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"page"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:375}};w.loc.source={body:"query NewsListFilterQuery ($page: Int, $limit: Int, $filter: Objects) {\n    news: News (page: $page, limit: $limit, filter: $filter) {\n        filter\n        items {\n            id\n            url\n            title\n            date\n            image\n            description\n        }\n        pagination {\n            total\n            limit\n            page\n        }\n    }\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};function h(e,i){if(e.kind==="FragmentSpread")i.add(e.name.value);else if(e.kind==="VariableDefinition"){var n=e.type;n.kind==="NamedType"&&i.add(n.name.value)}e.selectionSet&&e.selectionSet.selections.forEach(function(a){h(a,i)}),e.variableDefinitions&&e.variableDefinitions.forEach(function(a){h(a,i)}),e.definitions&&e.definitions.forEach(function(a){h(a,i)})}var D={};(function(){w.definitions.forEach(function(i){if(i.name){var n=new Set;h(i,n),D[i.name.value]=n}})})();function C(e,i){for(var n=0;n<e.definitions.length;n++){var a=e.definitions[n];if(a.name&&a.name.value==i)return a}}function me(e,i){var n={kind:e.kind,definitions:[C(e,i)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var a=D[i]||new Set,s=new Set,r=new Set;for(a.forEach(function(t){r.add(t)});r.size>0;){var p=r;r=new Set,p.forEach(function(t){if(!s.has(t)){s.add(t);var l=D[t]||new Set;l.forEach(function(v){r.add(v)})}})}return s.forEach(function(t){var l=C(e,t);l&&n.definitions.push(l)}),n}me(w,"NewsListFilterQuery");const ce={class:"content-block white-bg"},ue={class:"container"},ve={class:"content-block-wrap"},fe={class:"content-block-main"},ke={key:0,class:"news-filter navigation-container"},z=10,Fe={__name:"index",async setup(e){let i,n;const a=U(),s=H(()=>{var d;return parseInt(((d=a.query)==null?void 0:d.typeId)||0)||0}),r=J(parseInt(a.params.page||1)||1),{data:p,error:t}=([i,n]=M(()=>te(()=>{let d=O(w,{limit:z,page:r.value,filter:{type:s.value}},"cache-first");return Promise.all([d,ne().getPageInfo()]).then(([{news:f}])=>f)},"$zNHINvfvSO")),i=await i,n(),i);if(t.value)throw W(t.value);const{items:l,filter:v,pagination:E}=K(p.value);X(s,()=>{I()});async function I(d=1,f=!0){d<1&&(d=1);try{const k=await O(_,{filter:{type:s.value},page:d,limit:z},"cache-first").then(({news:S})=>S);l.value=k.items,E.value=k.pagination,history.replaceState(history.state,"",Y(a.fullPath,d)),f&&le(".content-block-main")}catch(k){Z(k)}}return(d,f)=>{const k=j,S=G,R=ie,B=ae;return c(),N("section",ce,[b("div",ue,[g(k),m(),b("div",ve,[b("div",fe,[g(S),m(),u(v)?(c(),N("div",ke,[g(R,{to:"/news/",class:F(["navigation-item",{active:s.value===0}]),"active-class":"route-active","exact-active-class":"exact-route-active"},{default:x(()=>[m(Q(d.$t("news.all")),1)]),_:1},8,["class"]),m(),(c(!0),N(A,null,P(u(v).types,o=>(c(),$(R,{"active-class":"route-active","exact-active-class":"exact-route-active",to:"/news/?typeId="+o.id,key:o.id,class:F(["navigation-item",{active:s.value===o.id}])},{default:x(()=>[m(Q(o.title),1)]),_:2},1032,["to","class"]))),128))])):T("",!0),m(),u(l).length>0?(c(),$(re,{key:u(l)[0].id,item:u(l)[0]},null,8,["item"])):T("",!0),m(),(c(!0),N(A,null,P(u(l).filter((o,L)=>L>0),(o,L)=>(c(),$(se,{key:o.id,item:o,class:F(["small-block",{"news-with-announce":o.description.length}])},null,8,["item","class"]))),128)),m(),g(B,{url:(d._.provides[ee]||d.$route).fullPath,data:u(E),onChange:f[0]||(f[0]=o=>I(o,!0))},null,8,["url","data"])]),m(),g(de)])])])}}};export{Fe as default};
